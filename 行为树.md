是一种行为决策模型，有限状态机（FSM, Finite State Machine）是最简单最经典的行为决策模型。



控制节点与行为节点：

- 控制节点可以自定义，控制节点需要代码中搭配一套相应的控制逻辑。
- 行为节点与具体的应用场景代码实现。

常用的控制节点：

- 选择节点/优先选择节点（Selector）：
  - 直到某一子节点返回”成功“时才会结束，或者所有子节点都返回“失败”则向父节点返回“失败”。
- 随机选择节点（Random Selector）：
  - 执行顺序是随机的。
- 序列节点（Sequence）：
  - 某一子节点返回”失败“时则会结束，所有子节点都返回“成功”则向父节点返回“成功”。
- 修饰节点（Decorator）：
  - 修饰节点只包含一个子节点，用来以某种方式来改变这个子节点的行为。
  - 修饰节点的类型比较多，比较常见的修饰节点有：
    - Until SUccess
    - Until Failure
    - Limit
    - Timer
    - TimeLimit
    - Invert：对子节点的返回结果取“非”。
- 并行节点（Parallel）：
  - 选择或顺序节点会依次执行所有的子节点，当子节点返回“成功”或“失败”后就会停止后续节点的执行；而并行节点也会依次执行所有的子节点，但无论子节点返回“成功”或“失败”都会继续运行后续节点，保证所有子节点都得到运行后再根据每个子节点的返回值来确定最终的返回结果。
  - 行为树是运行在单一线程上的，并不会在并行节点上开多个线程来进行真正的同时执行。
  - 并行节点一般可以设定退出该节点的条件：
    - 当全部节点都返回成功时退出；
    - 当某一个节点返回成功时退出；
    - 当全部节点都返回成功或失败时退出；
    - 当某一个节点返回成功或失败时退出；
    - 当全部节点都返回失败时退出；
    - 当某一个节点返回失败时退出；

节点返回值：

- Success
- Failure
- Running